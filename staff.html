<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Meet the dedicated staff at Sekgwari Primary School">
    <title>Our Staff - Sekgwari Primary School</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon"></div>
                <span>Sekgwari Primary</span>
            </div>
            <div class="menu-toggle" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="staff.html" class="active">Staff</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" style="min-height: 50vh;">
        <div class="hero-content">
            <div class="school-badge animate-fadeIn">Our Team</div>
            <h1 class="animate-fadeInUp">Meet Our Dedicated Staff</h1>
            <p class="animate-fadeInUp stagger-1">Passionate educators committed to your child's success</p>
        </div>
    </section>

    <!-- Teaching Staff Section -->
    <section class="bg-white">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Our Teaching Staff</h2>
                <p class="section-subtitle">Dedicated professionals making a difference every day</p>
            </div>

            <div class="staff-hierarchy-container">
                <!-- Principal Section -->
                <div id="principalSection" class="management-single animate-fadeInUp"></div>

                <!-- Vice Principal Section -->
                <div id="vicePrincipalSection" class="management-single animate-fadeInUp stagger-1"></div>

                <!-- HOD Section -->
                <div class="staff-hierarchy-row">
                    <h3 class="section-title" style="font-size: 1.5rem; margin-bottom: 2rem;">School Management (HODs)
                    </h3>
                    <div id="hodGrid" class="staff-two-col"></div>
                </div>

                <!-- Teachers & Clerks Section -->
                <div class="staff-hierarchy-row">
                    <h3 class="section-title" style="font-size: 1.5rem; margin-bottom: 2rem;">Our Educators & Support
                        Staff</h3>
                    <div id="generalStaffGrid" class="staff-two-col"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Join Our Team Section -->
    <section class="bg-gray">
        <div class="container text-center">
            <div style="max-width: 700px; margin: 0 auto;">
                <h2 class="section-title">Join Our Team</h2>
                <p class="section-subtitle">Are you a passionate educator looking to make a difference? We're always
                    looking for talented individuals to join our school family.</p>
                <div style="margin-top: 2rem;">
                    <a href="contact.html" class="btn btn-primary">Get In Touch</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Sekgwari Primary School</h3>
                <p>Nurturing excellence in education and building tomorrow's leaders through quality teaching and strong
                    values.</p>
                <div class="social-links">
                    <a href="#" class="social-link"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg></a>
                    <a href="#" class="social-link"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg></a>
                    <a href="#" class="social-link"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z">
                            </path>
                        </svg></a>
                </div>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="index.html">Home</a>
                <a href="about.html">About Us</a>
                <a href="staff.html">Our Staff</a>
                <a href="gallery.html">Gallery</a>
                <a href="contact.html">Contact</a>
            </div>

            <div class="footer-section">
                <h3>Contact Info</h3>
                <p>üìç <span data-setting="school_address">Gamatlala, Limpopo</span></p>
                <p>üìû <a href="#" data-setting="school_phone" style="color: inherit; text-decoration: none;">+27 XX XXX
                        XXXX</a></p>
                <p>‚úâÔ∏è <a href="#" data-setting="school_email"
                        style="color: inherit; text-decoration: none;">info@sekgwariprimary.co.za</a></p>
            </div>

            <div class="footer-section">
                <h3>School Hours</h3>
                <p data-setting="operating_hours">Monday - Friday 7:30 AM - 2:00 PM</p>
                <p style="margin-top: 1rem; color: #f59e0b;" data-setting="school_tagline">üìö Learning Never Stops</p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2026 Sekgwari Primary School. All rights reserved. | <a href="login.html"
                    style="color: inherit; text-decoration: none; opacity: 0.7; font-size: 0.8rem;">Admin Login</a></p>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Load School Settings
            await loadSchoolSettings();

            // Load Staff Members
            try {
                const { data: staffMembers, error } = await supabase
                    .from('staff')
                    .select('*')
                    .order('id', { ascending: true });

                if (error) throw error;

                if (staffMembers && staffMembers.length > 0) {
                    const sections = {
                        principal: [],
                        vicePrincipal: [],
                        hods: [],
                        general: []
                    };

                    staffMembers.forEach(staff => {
                        const pos = (staff.position || '').toLowerCase();
                        if (pos.includes('principal') && !pos.includes('vice') && !pos.includes('deputy')) {
                            sections.principal.push(staff);
                        } else if (pos.includes('vice principal') || pos.includes('deputy principal')) {
                            sections.vicePrincipal.push(staff);
                        } else if (pos.includes('hod') || pos.includes('head of department')) {
                            sections.hods.push(staff);
                        } else {
                            sections.general.push(staff);
                        }
                    });

                    const createCard = (staff, index, staggerBase) => {
                        const imageHtml = staff.image_url
                            ? `<img src="${staff.image_url}" alt="${staff.name}" class="staff-image">`
                            : `<img src="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%231e3a8a%22 width=%22200%22 height=%22200%22/%3E%3Crect fill=%22url(%23pattern)%22 width=%22100%25%22 height=%22100%25%22/%3E%3Cdefs%3E%3Cpattern id=%22pattern%22 width=%2220%22 height=%2220%22 patternUnits=%22userSpaceOnUse%22%3E%3Ccircle cx=%222%22 cy=%222%22 r=%221%22 fill=%22rgba(255,255,255,0.1)%22/%3E%3C/pattern%3E%3C/defs%3E%3Cpath d=%22M12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 3a3 3 0 1 0 0 6 3 3 0 0 0 0-6Z%22 fill=%22white%22 transform=%22scale(5) translate(4, 4)%22/%3E%3C/svg%3E" alt="Fallback Icon" class="staff-image">`;

                        return `
                            <div class="staff-card animate-fadeInUp stagger-${(index % 6) + staggerBase}">
                                <div class="staff-image-wrapper">
                                    ${imageHtml}
                                </div>
                                <h3 class="staff-name">${staff.name}</h3>
                                <span class="staff-position">${staff.position || ''}</span>
                                <p class="staff-qualification">${staff.qualification || ''}</p>
                                <p class="staff-message">"${staff.message || 'Committed to excellence in education.'}"</p>
                                <p class="staff-grade">${staff.grade || ''}</p>
                            </div>
                        `;
                    };

                    // Render sections
                    if (sections.principal.length > 0) {
                        document.getElementById('principalSection').innerHTML = createCard(sections.principal[0], 0, 1);
                    }
                    if (sections.vicePrincipal.length > 0) {
                        document.getElementById('vicePrincipalSection').innerHTML = createCard(sections.vicePrincipal[0], 0, 2);
                    }

                    document.getElementById('hodGrid').innerHTML = sections.hods.map((s, i) => createCard(s, i, 3)).join('');
                    document.getElementById('generalStaffGrid').innerHTML = sections.general.map((s, i) => createCard(s, i, 4)).join('');

                    // Hide headers if empty
                    if (sections.hods.length === 0) document.getElementById('hodGrid').parentElement.style.display = 'none';
                    if (sections.general.length === 0) document.getElementById('generalStaffGrid').parentElement.style.display = 'none';

                } else {
                    document.querySelector('.staff-hierarchy-container').innerHTML = '<div style="text-align: center; padding: 4rem; color: var(--gray-500);"><p>No staff members listed at the moment. Please check back soon!</p></div>';
                }
            } catch (err) {
                console.error('Error loading staff:', err);
                document.querySelector('.staff-hierarchy-container').innerHTML = '<div style="text-align: center; padding: 4rem; color: var(--gray-500);"><p>Unable to load staff members right now.</p></div>';
            }
        });

        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }
    </script>
</body>

</html>