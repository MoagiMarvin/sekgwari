<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Explore the vibrant life at Sekgwari Primary School through our gallery">
    <title>School Gallery - Sekgwari Primary School</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Supabase JS Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/config.js"></script>
    <style>
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .gallery-item {
            position: relative;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: var(--transition-normal);
            aspect-ratio: 4/3;
        }

        .gallery-item:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .gallery-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 1.5rem;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: white;
            opacity: 0;
            transition: var(--transition-normal);
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-caption {
            font-weight: 600;
            margin: 0;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon"></div>
                <span>Sekgwari Primary</span>
            </div>
            <div class="menu-toggle" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="staff.html">Staff</a></li>
                <li><a href="gallery.html" class="active">Gallery</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" style="min-height: 50vh;">
        <div class="hero-content">
            <div class="school-badge animate-fadeIn">Visual Journey</div>
            <h1 class="animate-fadeInUp">Our School Gallery</h1>
            <p class="animate-fadeInUp stagger-1">Capturing precious moments and achievements</p>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="bg-white">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Latest Photos</h2>
                <p class="section-subtitle">A glimpse into the daily life and special events at Sekgwari Primary</p>
            </div>

            <div class="gallery-grid" id="galleryGrid">
                <div style="grid-column: 1 / -1; text-align: center; padding: 4rem; color: var(--gray-500);">
                    <p>Loading gallery photos...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Sekgwari Primary School</h3>
                <p>Nurturing excellence in education and building tomorrow's leaders through quality teaching and strong
                    values.</p>
                <div class="social-links">
                    <a href="#" class="social-link"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg></a>
                    <a href="#" class="social-link"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                            <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                        </svg></a>
                    <a href="#" class="social-link"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z">
                            </path>
                        </svg></a>
                </div>
            </div>

            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="index.html">Home</a>
                <a href="about.html">About Us</a>
                <a href="staff.html">Our Staff</a>
                <a href="gallery.html">Gallery</a>
                <a href="contact.html">Contact</a>
            </div>

            <div class="footer-section">
                <h3>Contact Info</h3>
                <p>üìç <span data-setting="school_address">Gamatlala, Limpopo</span></p>
                <p>üìû <a href="#" data-setting="school_phone" style="color: inherit; text-decoration: none;">+27 XX XXX
                        XXXX</a></p>
                <p>‚úâÔ∏è <a href="#" data-setting="school_email"
                        style="color: inherit; text-decoration: none;">info@sekgwariprimary.co.za</a></p>
            </div>

            <div class="footer-section">
                <h3>School Hours</h3>
                <p data-setting="operating_hours">Monday - Friday 7:30 AM - 2:00 PM</p>
                <p style="margin-top: 1rem; color: #f59e0b;" data-setting="school_tagline">üìö Learning Never Stops</p>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2026 Sekgwari Primary School. All rights reserved. | <a href="login.html"
                    style="color: inherit; text-decoration: none; opacity: 0.7; font-size: 0.8rem;">Admin Login</a></p>
        </div>
    </footer>

    <!-- Mobile Menu Script -->
    <!-- Supabase Initialization Script -->
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Load School Settings
            await loadSchoolSettings();

            // Load all gallery items
            const { data: galleryItems, error } = await supabase
                .from('gallery')
                .select('*')
                .order('created_at', { ascending: false });

            const galleryGrid = document.getElementById('galleryGrid');
            if (error) {
                galleryGrid.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 4rem; color: var(--gray-500);"><p>Error loading gallery items.</p></div>';
            } else if (galleryItems && galleryItems.length > 0) {
                galleryGrid.innerHTML = galleryItems.map((row, index) => `
                    <div class="gallery-item animate-fadeInUp stagger-${(index % 6) + 1}">
                        <img src="${row.image_url}" alt="${row.caption || ''}">
                        ${row.caption ? `
                            <div class="gallery-overlay">
                                <p class="gallery-caption">${row.caption}</p>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            } else {
                galleryGrid.innerHTML = '<div style="grid-column: 1 / -1; text-align: center; padding: 4rem; color: var(--gray-500);"><p>Our gallery is currently being curated. Please check back later for new photos!</p></div>';
            }
        });

        function toggleMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }
    </script>
</body>

</html>